# 官网新增：智能客服机器人功能

**时间：** 2025.01.02

## 一、背景

预研开发一款智能客服机器人，通过关键词查询问题的答案，实现了模糊查询功能。

本文将介绍模糊查询功能的设计与实现，并分享其在提升用户体验方面的价值。

![An image](/images/AI/kefu-1.png)

![An image](/images/AI/kefu-2.png)

---

## 二、功能介绍

机器人根据用户输入的文本与预定义的 Q&A 数据（qaData）进行精准匹配，返回对应的答案。如果未找到匹配（支持模糊查询）的键，则提示用户问题未被识别。

**模糊查询逻辑：**

- 用户输入的文本可以部分匹配 Q&A 数据中的键。
- 系统根据部分匹配返回最相关的答案。
- 大小写无关，提高匹配成功率。

**备注：** 后续的方向有两个：

1. **改变现有方式：** 引入第三方大模型（如 ChatGPT、文言一心等）；
2. **沿用现有方式：** 拓展丰富当前 Q&A 数据。

---

## 三、实现步骤

### 1. 数据准备

确保 Q&A 数据（qaData.json）结构规范，示例如下：

```json
{
  "公司地址": "深圳市宝安区福海街道塘尾社区塘尾股份商务大厦 1902",
  "公司业务": "专注于智能家居与物联网(IoT)领域。",
  "公司电话": "0755-12345678",
  "人工客服": "请拨打 0755-12345678 或通过官网联系我们。",
  "公司邮箱": "info@szzbn.cn",
  "公司简介": "深圳中博纳网络科技有限公司是一家高新技术企业。"
}
```

### 2. 核心代码实现

组件部分：在 `getBotResponse` 方法中实现模糊查询逻辑：

```javascript
const getBotResponse = (userText) => {
  const normalizedText = userText.trim().toLowerCase();

  // 模糊查询逻辑：从 qaData 中找到匹配的键
  const matchedKey = Object.keys(qaData.value).find((key) =>
    key.toLowerCase().includes(normalizedText),
  );

  // 如果找到匹配的键，返回对应的值；否则返回默认回复
  return matchedKey
    ? qaData.value[matchedKey]
    : '对不起，我可能无法理解您的问题。请联系人工服务。谢谢！';
};
```

**改进点：**

- **部分匹配：** 通过 `includes()` 实现对键的部分匹配。
- **大小写无关：** 对输入文本和键使用 `toLowerCase()` 统一转换。
- **默认回复：** 未匹配时，提供友好的提示。

### 3. 接入前端

模糊查询的逻辑嵌入到 `sendMessage` 流程中：

```javascript
const sendMessage = () => {
  const userText = userInput.value.trim();
  if (userText) {
    addMessage(userText, 'user');
    userInput.value = '';
    const botReply = getBotResponse(userText);
    addMessage(botReply, 'bot');
  }
};
```

### 4. 用户体验优化

- **热门问题快捷入口：** 通过 `el-tag` 显示热门问题，用户点击即可快速查询。
- **滚动到最新消息：** 确保聊天记录始终显示最新内容。

---

## 四、示例展示

1. **用户输入“地址”：**

   - **结果：** 返回“深圳市宝安区福海街道塘尾社区塘尾股份商务大厦 1902”。

2. **用户输入“不相关的问题”：**

   - **结果：** 返回默认提示“对不起，我可能无法理解您的问题。请联系人工服务。”

3. **点击“公司简介”快捷标签：**
   - **结果：** 直接显示公司简介内容。

---

## 五、优势分析

- **提高容错率：** 用户无需精确输入即可获取答案。
- **提升体验：** 快捷标签与模糊匹配结合，操作更便捷。
- **易于扩展：** 后续可进一步结合自然语言处理技术，优化查询效果。

模糊查询功能的实现显著改善了用户的操作体验，可以将较多较繁杂的公司内容信息通过关键词的方式高效的反馈给用户，为后续功能扩展（如多语言支持、上下文语义分析）奠定了基础。后续可以考虑增加 **多语言** 版本。
