# 商城系统架构设计规划

## 1. 系统概述

本商城系统基于 Go 语言技术栈构建的分布式平台，采用微服务架构设计，部署于 Kubernetes 集群。系统包含商品服务、订单服务、支付服务等核心模块。

## 2. 技术栈选型

### 2.1 基础框架

1）Web 框架 : Gin (高性能 HTTP 框架)

2）ORM : Gorm (支持 MySQL 的 ORM 框架)

3）数据库 : MySQL 8.0 (主从架构)

4）缓存 : Redis 7.0+ (集群模式)

5）消息队列 : RabbitMQ

6）服务发现 : Consul/ETCD (服务注册与发现)

7）配置中心 : Nacos/Apollo (统一配置管理)

### 2.2 基础设施（已部署）

1）容器编排 : Kubernetes

2）服务网格 : calico

3）监控告警 : Prometheus + Grafana

4）日志系统 : Loki+Promtail+Grafana

## 3. 系统架构设计

### 3.1 整体架构图

![An image](/images/RD/商城系统架构设计规划.png)

## 4. 数据库设计

### 4.1 分库分表策略

1）读写分离：主库写，从库读

2）水平分表：根据业务具体来分

## 5. 服务高可用

1）Kubernetes Pod 多副本部署

## 6. 存储高可用

1）MySQL 主从集群

2）Redis 集群

## 7. 性能优化

1）Redis 集群

2）数据库索引优化

## 8. 安全设计

1）敏感数据加密存储

2）数据库字段脱敏

3）防止 SQL 注入

4）JWT 鉴权

5）RBAC 权限控制

6）速率限制防刷

7）敏感接口二次确认

## 9. 运维监控

1）K8S

2）Prometheus+Grafana

## 10. 阶段规划

### 10.1 第一阶段

1）使用 minio 搭建 OSS---下周搭建

2）搭建商城单体服务

3）商城管理后台搭建

4. 商品模块开发、订单模块开发、支付模块开发等

### 10.2 第二阶段

1）根据业务拆分成微服务

2）商品微服务开发

3）订单微服务开发

4）物流微服务开发

5）根据需要拆分其他服务

### 10.3 第三阶段

1）商品检索优化

2）数据报表开发

3）日志分析
